#!/bin/bash

if [ -z "${TORNADO_SDK}" ]; then
    echo "Please ensure the TORNADO_SDK environment variable is set correctly"
    exit -1
fi

if [ -z "${JAVA_HOME}" ]; then
    echo "Please ensure the JAVA_HOME environment variable is set correctly"
fi

TORNADO_FLAGS="-Djava.ext.dirs=${TORNADO_SDK}/share/java/tornado -Djava.library.path=${TORNADO_SDK}/lib -Dlog4j.configurationFile=${TORNADO_SDK}/etc/log4j2.xml"
JAVA_CMD=${JAVA_HOME}/bin/java
JAVA_FLAGS="-server -XX:-UseJVMCIClassLoader -XX:-UseCompressedOops ${TORNADO_FLAGS} "

JAVA_FLAGS="${JAVA_FLAGS} -Dgraal.Dump=*:verbose -Dgraal.PrintGraph=true -Dgraal.PrintCFG=true"

${JAVA_CMD} ${JAVA_FLAGS} $@
